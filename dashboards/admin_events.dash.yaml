global:
    mode: dark
    settings:
        refresh:
            interval: 5
        columns:
            - id: total
              pattern: >-
                  #
datasets:
    - uuid: admin_events
      url: https://raw.githubusercontent.com/pedro-hos/keycloak-dashbuilder/main/data/admin_events.json
      expression: >-
          $.[ $.[$.time, $.operationType, $.resourceType]]
      columns:
          - id: time
            type: label
          - id: Operation Type
            type: LABEL
          - id: Resource Type
            type: LABEL
pages:
    - properties:
          margin: 10px
      rows:
          - columns:
                - components:
                      - html: >-
                            <strong style="font-size: xx-large">Admin Events</strong>
                            <hr />
          - columns:
                - span: 1
                  components:
                      - html: >-
                            <strong>Select Operation Type</strong>
                      - properties:
                            width: 140px
                        settings:
                            selector:
                                multiple: true
                            type: selector
                            filter:
                                enabled: true
                                notification: true
                            lookup:
                                uuid: admin_events
                                group:
                                    - columnGroup:
                                          source: Operation Type
                                      functions:
                                          - source: Operation Type
                - span: 1
                  components:
                      - html: >-
                            <strong>Select Resource Type</strong>
                      - properties:
                            width: 140px
                            margin-bottom: 30px
                        settings:
                            selector:
                                multiple: true
                            type: selector
                            filter:
                                enabled: true
                                notification: true
                            lookup:
                                uuid: admin_events
                                group:
                                    - columnGroup:
                                          source: Resource Type
                                      functions:
                                          - source: Resource Type

          - columns:
                - span: 6
                  components:
                      - settings:
                            type: BARCHART
                            filter:
                                enabled: true
                                listening: true
                            general:
                                title: Resource Type
                            chart:
                                resizable: true
                                height: 400
                                grid:
                                    x: false
                            lookup:
                                uuid: admin_events
                                sort:
                                    - column: total
                                      order: descending
                                group:
                                    - columnGroup:
                                          source: Resource Type
                                      functions:
                                          - source: Resource Type
                                          - source: Resource Type
                                            function: COUNT
                                            column: total
                - span: 6
                  components:
                      - settings:
                            type: BARCHART
                            filter:
                                enabled: true
                                listening: true
                            general:
                                title: Operation Type
                            chart:
                                resizable: true
                                height: 400
                                grid:
                                    x: false
                            lookup:
                                uuid: admin_events
                                sort:
                                    - column: total
                                      order: descending
                                group:
                                    - columnGroup:
                                          source: Operation Type
                                      functions:
                                          - source: Operation Type
                                          - source: Operation Type
                                            function: COUNT
                                            column: total

          - columns:
                - components:
                      - html: >-
                            <strong style="font-size: x-large">List of Admin Events</strong>
                            <hr />
                      - settings:
                            component: table
                            external:
                                width: 100%
                            lookup:
                                uuid: admin_events
