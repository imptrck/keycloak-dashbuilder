global:
    mode: dark
    settings:
        lookup:
            uuid: events
datasets:
    - uuid: events
      url: https://raw.githubusercontent.com/pedro-hos/keycloak-dashbuilder/main/data/login_events.json
      expression: >-
          $.[ $.[$fromMillis($.time), $.type, $.details.username ? $.details.username : "Unknow" ]]
      columns:
          - id: time
            type: DATE
          - id: type
            type: LABEL
          - id: user
            type: LABEL
pages:
    - properties:
          margin: 10px
      components:
          - html: >-
                <strong style="font-size: xx-large">Login Events</strong>
                <hr />        
                <strong>Select type</strong>
          - settings:
                selector:
                    multiple: true
                type: selector
                subtype: selector_labels
                filter:
                    enabled: true
                    notification: true
                lookup:
                    uuid: events
                    group:
                        - columnGroup:
                              source: type
                          functions:
                              - source: type
          - settings:
                type: barchart
                axis:
                    x:
                        labels_angle: 6
                filter:
                    enabled: true
                    listening: true
                chart:
                    resizable: true
                    height: 400
                    grid:
                        x: false
                columns:
                    - id: Total
                      pattern: "#"
                lookup:
                    uuid: events
                    group:
                        - columnGroup:
                              source: type
                          functions:
                              - source: type
                              - source: type
                                function: COUNT
                                column: Total
          - settings:
                component: table
                external:
                    width: 100%
                lookup:
                    uuid: events
